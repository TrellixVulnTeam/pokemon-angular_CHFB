{"version":3,"file":"ngx-lite-modal.js","sources":["../../../projects/ngx-modal/src/ngx-modal.component.ts","../../../projects/ngx-modal/src/ngx-modal.component.html","../../../projects/ngx-modal/src/ngx-modal.module.ts","../../../projects/ngx-modal/src/public_api.ts","../../../projects/ngx-modal/src/ngx-lite-modal.ts"],"sourcesContent":["import {\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  Input,\n  OnChanges,\n  OnDestroy,\n  Output,\n  TemplateRef,\n  SimpleChanges,\n  ViewEncapsulation,\n  ChangeDetectionStrategy,\n} from '@angular/core';\n\nimport {\n  trapTabFocus,\n  lockScroll,\n  unlockScroll,\n  ariaHideBody,\n  ariaShowBody,\n  KeyCodes,\n} from '@ngx-lite/util';\n\n@Component({\n  selector: 'ngx-modal',\n  templateUrl: './ngx-modal.component.html',\n  styleUrls: ['./ngx-modal.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class NgxModalComponent implements OnChanges, OnDestroy {\n  @Input() closable = true;\n  @Input() type = '';\n  @Input() large = false;\n  @Input() visible = false;\n  @Input() templateRef?: TemplateRef<any>;\n  @Output()\n  readonly visibleChange: EventEmitter<boolean> = new EventEmitter<boolean>();\n\n  private lastFocusedElement?: HTMLElement;\n\n  constructor(private elementRef: ElementRef) {}\n\n  ngOnChanges(changes: SimpleChanges) {\n    const visible = changes.visible.currentValue;\n\n    if (visible) {\n      lockScroll();\n      ariaHideBody();\n      setTimeout(() => trapTabFocus(this.elementRef.nativeElement), 0); // todo: need to hook into the proper lifecycle\n    } else {\n      unlockScroll();\n      ariaShowBody();\n    }\n\n    this.visibleChange.emit(this.visible);\n  }\n\n  ngOnDestroy() {\n    this.cleanUpDOM();\n  }\n\n  @HostListener('document:click', ['$event'])\n  rootClick(event: any) {\n    if (event && event.target) {\n      this.lastFocusedElement = event.target;\n    }\n  }\n\n  @HostListener('window:keyup', ['$event'])\n  closeOnEscape(event: KeyboardEvent) {\n    if (this.closable) {\n      this.close();\n    }\n  }\n\n  closeOnClick(event?: MouseEvent) {\n    const closable =\n      this.closable &&\n      event &&\n      (event.target as HTMLElement).className.includes(\n        'ngx-modal-closable-target'\n      );\n\n    if (closable) {\n      this.close();\n    }\n  }\n\n  close() {\n    this.visible = false;\n    this.visibleChange.emit(this.visible);\n    this.cleanUpDOM();\n  }\n\n  private cleanUpDOM() {\n    unlockScroll();\n    ariaShowBody();\n    this.focusLastFocusedElement();\n  }\n\n  private focusLastFocusedElement() {\n    if (this.lastFocusedElement) {\n      this.lastFocusedElement.focus();\n    }\n  }\n}\n","<dialog role=\"dialog\" [attr.open]=\"visible\" [attr.aria-hidden]=\"!visible\" (click)=\"closeOnClick($event)\" [ngClass]=\"{'hidden': !visible}\"\n  class=\"ngx-modal-overlay ngx-modal-closable-target\">\n  <div class=\"ngx-modal\" role=\"document\">\n    <div class=\"ngx-modal__header\">\n      <ng-content select=\"[ngx-modal-header]\"></ng-content>\n      <button type=\"button\" *ngIf=\"closable\" (click)=\"closeOnClick()\" aria-label=\"close modal\" title=\"close modal\" class=\"ngx-modal__close-btn ngx-modal-closable-target\">\n        <span class=\"ngx-modal__icon-close ngx-modal-closable-target\">&times;</span>\n      </button>\n    </div>\n    <div class=\"ngx-modal__content\">\n      <ng-content *ngIf=\"visible && !templateRef\"></ng-content>\n      <ng-template *ngIf=\"visible && templateRef\" [ngTemplateOutlet]=\"templateRef\"></ng-template>\n    </div>\n    <div class=\"ngx-modal__footer\">\n      <ng-content select=\"[ngx-modal-footer]\"></ng-content>\n    </div>\n  </div>\n</dialog>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NgxModalComponent } from './ngx-modal.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [NgxModalComponent],\n  exports: [NgxModalComponent],\n})\nexport class NgxModalModule {}\n","/*\n * Public API Surface of ngx-modal\n */\n\nexport * from './ngx-modal.component';\nexport * from './ngx-modal.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}