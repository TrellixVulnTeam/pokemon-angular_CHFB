{"version":3,"file":"ngx-lite-modal.umd.js","sources":["../../../projects/ngx-modal/src/ngx-modal.component.ts","../../../projects/ngx-modal/src/ngx-modal.component.html","../../../projects/ngx-modal/src/ngx-modal.module.ts","../../../projects/ngx-modal/src/public_api.ts","../../../projects/ngx-modal/src/ngx-lite-modal.ts"],"sourcesContent":["import {\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  Input,\n  OnChanges,\n  OnDestroy,\n  Output,\n  TemplateRef,\n  SimpleChanges,\n  ViewEncapsulation,\n  ChangeDetectionStrategy,\n} from '@angular/core';\n\nimport {\n  trapTabFocus,\n  lockScroll,\n  unlockScroll,\n  ariaHideBody,\n  ariaShowBody,\n  KeyCodes,\n} from '@ngx-lite/util';\n\n@Component({\n  selector: 'ngx-modal',\n  templateUrl: './ngx-modal.component.html',\n  styleUrls: ['./ngx-modal.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class NgxModalComponent implements OnChanges, OnDestroy {\n  @Input() closable = true;\n  @Input() type = '';\n  @Input() large = false;\n  @Input() visible = false;\n  @Input() templateRef?: TemplateRef<any>;\n  @Output()\n  readonly visibleChange: EventEmitter<boolean> = new EventEmitter<boolean>();\n\n  private lastFocusedElement?: HTMLElement;\n\n  constructor(private elementRef: ElementRef) {}\n\n  ngOnChanges(changes: SimpleChanges) {\n    const visible = changes.visible.currentValue;\n\n    if (visible) {\n      lockScroll();\n      ariaHideBody();\n      setTimeout(() => trapTabFocus(this.elementRef.nativeElement), 0); // todo: need to hook into the proper lifecycle\n    } else {\n      unlockScroll();\n      ariaShowBody();\n    }\n\n    this.visibleChange.emit(this.visible);\n  }\n\n  ngOnDestroy() {\n    this.cleanUpDOM();\n  }\n\n  @HostListener('document:click', ['$event'])\n  rootClick(event: any) {\n    if (event && event.target) {\n      this.lastFocusedElement = event.target;\n    }\n  }\n\n  @HostListener('window:keyup', ['$event'])\n  closeOnEscape(event: KeyboardEvent) {\n    if (this.closable) {\n      this.close();\n    }\n  }\n\n  closeOnClick(event?: MouseEvent) {\n    const closable =\n      this.closable &&\n      event &&\n      (event.target as HTMLElement).className.includes(\n        'ngx-modal-closable-target'\n      );\n\n    if (closable) {\n      this.close();\n    }\n  }\n\n  close() {\n    this.visible = false;\n    this.visibleChange.emit(this.visible);\n    this.cleanUpDOM();\n  }\n\n  private cleanUpDOM() {\n    unlockScroll();\n    ariaShowBody();\n    this.focusLastFocusedElement();\n  }\n\n  private focusLastFocusedElement() {\n    if (this.lastFocusedElement) {\n      this.lastFocusedElement.focus();\n    }\n  }\n}\n","<dialog role=\"dialog\" [attr.open]=\"visible\" [attr.aria-hidden]=\"!visible\" (click)=\"closeOnClick($event)\" [ngClass]=\"{'hidden': !visible}\"\n  class=\"ngx-modal-overlay ngx-modal-closable-target\">\n  <div class=\"ngx-modal\" role=\"document\">\n    <div class=\"ngx-modal__header\">\n      <ng-content select=\"[ngx-modal-header]\"></ng-content>\n      <button type=\"button\" *ngIf=\"closable\" (click)=\"closeOnClick()\" aria-label=\"close modal\" title=\"close modal\" class=\"ngx-modal__close-btn ngx-modal-closable-target\">\n        <span class=\"ngx-modal__icon-close ngx-modal-closable-target\">&times;</span>\n      </button>\n    </div>\n    <div class=\"ngx-modal__content\">\n      <ng-content *ngIf=\"visible && !templateRef\"></ng-content>\n      <ng-template *ngIf=\"visible && templateRef\" [ngTemplateOutlet]=\"templateRef\"></ng-template>\n    </div>\n    <div class=\"ngx-modal__footer\">\n      <ng-content select=\"[ngx-modal-footer]\"></ng-content>\n    </div>\n  </div>\n</dialog>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NgxModalComponent } from './ngx-modal.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [NgxModalComponent],\n  exports: [NgxModalComponent],\n})\nexport class NgxModalModule {}\n","/*\n * Public API Surface of ngx-modal\n */\n\nexport * from './ngx-modal.component';\nexport * from './ngx-modal.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["EventEmitter","lockScroll","ariaHideBody","trapTabFocus","unlockScroll","ariaShowBody","Component","ViewEncapsulation","ChangeDetectionStrategy","Input","Output","HostListener","CommonModule","NgModule"],"mappings":"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"}